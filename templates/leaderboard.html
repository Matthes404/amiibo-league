{% extends 'base.html' %}
{% block content %}
<h1>Leaderboard</h1>
<form method="get" action="/leaderboard">
    <label>Win% over last</label>
    <input type="number" name="last" min="1" value="{{ last or '' }}">
    <button type="submit">Apply</button>
</form>
<table class="leaderboard">
    <tr><th>Name</th><th>Title</th><th>Current Elo</th><th>Peak Elo</th><th>League</th><th>KO Titles</th><th>Win %</th></tr>
    {% for amiibo in amiibos %}
    <tr>
        <td>{{ amiibo.name }}</td>
        <td>{{ amiibo.title }}</td>
        <td>{{ amiibo.current_elo }}</td>
        <td>{{ amiibo.peak_elo }}</td>
        <td>{{ amiibo.league }}</td>
        <td>{{ amiibo.ko_titles }}</td>
        <td>{{ amiibo.win_percentage(last)|round(1) }}</td>
    </tr>
    {% endfor %}
</table>
<form method="post" action="/add_amiibo">
    <h3>Add Amiibo</h3>
    <input type="text" name="name" placeholder="Name" required>
    <button type="submit">Add</button>
</form>
{% endblock %}
